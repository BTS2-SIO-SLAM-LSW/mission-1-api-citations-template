<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Formulaire d'√âvaluation - Mission 1</title>
    <style>
        :root {
            --primary-color: #3b82f6;
            --primary-dark: #1e40af;
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --border-color: #e5e7eb;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --radius-md: 12px;
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, var(--bg-secondary) 0%, #e0e7ff 100%);
            min-height: 100vh;
            padding: var(--spacing-lg);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: var(--spacing-xl);
            text-align: center;
        }

        .alert {
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-lg);
            font-weight: 500;
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border-left: 4px solid var(--primary-color);
        }

        .alert-success {
            background: #d1fae5;
            color: #047857;
            border-left: 4px solid var(--success-color);
        }

        .content {
            padding: var(--spacing-xl);
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-md);
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            color: var(--text-primary);
        }

        input, select, textarea {
            width: 100%;
            padding: var(--spacing-md);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            padding: var(--spacing-md) var(--spacing-xl);
            border: none;
            border-radius: var(--radius-md);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .json-output {
            background: #1f2937;
            color: #f9fafb;
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-all;
            margin-top: var(--spacing-md);
        }

        .actions {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
            margin-top: var(--spacing-xl);
        }

        .score-summary {
            background: var(--bg-secondary);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-lg);
            text-align: center;
        }

        .score-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Formulaire d'√âvaluation</h1>
            <p>Mission 1 - G√©n√©rateur de Citations avec API REST</p>
        </div>

        <div class="content">
            <div class="alert alert-info">
                <strong>üìù Instructions :</strong> Remplissez ce formulaire puis copiez le JSON g√©n√©r√© dans votre fichier <code>evaluation.json</code>
            </div>

            <form id="evaluationForm">
                <!-- Informations √âtudiant -->
                <h2>üë§ Informations √âtudiant</h2>
                
                <div class="form-group">
                    <label for="github_username">Nom d'utilisateur GitHub *</label>
                    <div style="display: flex; gap: 0.5rem; align-items: flex-end;">
                        <input type="text" id="github_username" required placeholder="votre-nom-utilisateur" style="flex: 1;">
                        <button type="button" onclick="fetchGitHubProfile()" class="btn btn-primary">
                            üîç Auto-remplir
                        </button>
                    </div>
                </div>

                <div id="github-status" style="margin-bottom: 1rem;"></div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="nom">Nom *</label>
                        <input type="text" id="nom" required placeholder="Sera rempli automatiquement">
                    </div>
                    <div class="form-group">
                        <label for="prenom">Pr√©nom *</label>
                        <input type="text" id="prenom" required placeholder="Sera rempli automatiquement">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="date">Date de r√©alisation *</label>
                        <input type="date" id="date" required>
                    </div>
                    <div class="form-group">
                        <label for="duree_seance">Dur√©e de la s√©ance</label>
                        <select id="duree_seance">
                            <option value="60min">60 minutes</option>
                            <option value="90min">90 minutes</option>
                            <option value="120min">120 minutes</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="github_repository">URL du repository GitHub *</label>
                        <input type="url" id="github_repository" required placeholder="G√©n√©r√© automatiquement...">
                    </div>
                    <div class="form-group">
                        <label for="github_pages_url">URL GitHub Pages *</label>
                        <input type="url" id="github_pages_url" required placeholder="G√©n√©r√© automatiquement...">
                    </div>
                </div>

                <!-- QCM Section -->
                <h2>üìö Questionnaire (QCM)</h2>
                
                <!-- QCM D√©butant -->
                <h3>Niveau D√©butant (3 points)</h3>
                
                <div class="form-group">
                    <label>Q1. Quelle m√©thode JavaScript permet de faire un appel API asynchrone moderne ? (1 pt)</label>
                    <div>
                        <label><input type="radio" name="q1" value="fetch()"> fetch()</label><br>
                        <label><input type="radio" name="q1" value="call()"> call()</label><br>
                        <label><input type="radio" name="q1" value="request()"> request()</label><br>
                        <label><input type="radio" name="q1" value="api()"> api()</label>
                    </div>
                    <textarea id="q1_justification" placeholder="Justification de votre r√©ponse..."></textarea>
                </div>

                <div class="form-group">
                    <label>Q2. Que signifie l'acronyme API ? (1 pt)</label>
                    <div>
                        <label><input type="radio" name="q2" value="Application Programming Interface"> Application Programming Interface</label><br>
                        <label><input type="radio" name="q2" value="Automated Program Interface"> Automated Program Interface</label><br>
                        <label><input type="radio" name="q2" value="Advanced Programming Interface"> Advanced Programming Interface</label><br>
                        <label><input type="radio" name="q2" value="Application Process Interface"> Application Process Interface</label>
                    </div>
                    <textarea id="q2_justification" placeholder="Justification de votre r√©ponse..."></textarea>
                </div>

                <div class="form-group">
                    <label>Q3. Comment r√©cup√®re-t-on un √©l√©ment HTML par son ID en JavaScript ? (1 pt)</label>
                    <div>
                        <label><input type="radio" name="q3" value="document.getElementById('monId')"> document.getElementById('monId')</label><br>
                        <label><input type="radio" name="q3" value="document.getElement('monId')"> document.getElement('monId')</label><br>
                        <label><input type="radio" name="q3" value="getElementById('monId')"> getElementById('monId')</label><br>
                        <label><input type="radio" name="q3" value="document.find('#monId')"> document.find('#monId')</label>
                    </div>
                    <textarea id="q3_justification" placeholder="Justification de votre r√©ponse..."></textarea>
                </div>

                <!-- QCM Interm√©diaire -->
                <h3>Niveau Interm√©diaire (6 points)</h3>
                
                <div class="form-group">
                    <label>Q4. Comment g√®re-t-on une erreur avec la m√©thode fetch() ? (2 pts)</label>
                    <div>
                        <label><input type="radio" name="q4" value="try...catch avec async/await"> try...catch avec async/await</label><br>
                        <label><input type="radio" name="q4" value="error() callback"> error() callback</label><br>
                        <label><input type="radio" name="q4" value="fail() method"> fail() method</label><br>
                        <label><input type="radio" name="q4" value="exception handler"> exception handler</label>
                    </div>
                    <textarea id="q4_justification" placeholder="Justification de votre r√©ponse..."></textarea>
                </div>

                <div class="form-group">
                    <label>Q5. Quelle balise HTML est s√©mantiquement correcte pour afficher une citation ? (2 pts)</label>
                    <div>
                        <label><input type="radio" name="q5" value="<blockquote>"> &lt;blockquote&gt;</label><br>
                        <label><input type="radio" name="q5" value="<cite>"> &lt;cite&gt;</label><br>
                        <label><input type="radio" name="q5" value="<quote>"> &lt;quote&gt;</label><br>
                        <label><input type="radio" name="q5" value="<div class='citation'>"> &lt;div class='citation'&gt;</label>
                    </div>
                    <textarea id="q5_justification" placeholder="Justification de votre r√©ponse..."></textarea>
                </div>

                <div class="form-group">
                    <label>Q6. Que fait la commande 'git push origin main' ? (2 pts)</label>
                    <div>
                        <label><input type="radio" name="q6" value="Envoie les commits locaux vers le repository distant"> Envoie les commits locaux vers le repository distant</label><br>
                        <label><input type="radio" name="q6" value="R√©cup√®re les modifications du serveur"> R√©cup√®re les modifications du serveur</label><br>
                        <label><input type="radio" name="q6" value="Cr√©e une nouvelle branche main"> Cr√©e une nouvelle branche main</label><br>
                        <label><input type="radio" name="q6" value="Supprime les fichiers du repository"> Supprime les fichiers du repository</label>
                    </div>
                    <textarea id="q6_justification" placeholder="Justification de votre r√©ponse..."></textarea>
                </div>

                <!-- QCM Avanc√© -->
                <h3>Niveau Avanc√© (9 points)</h3>
                
                <div class="form-group">
                    <label>Q7. Que retourne l'API quotable.io dans sa r√©ponse ? (3 pts)</label>
                    <div>
                        <label><input type="radio" name="q7" value="Un objet JSON avec les propri√©t√©s content, author et length"> Un objet JSON avec les propri√©t√©s content, author et length</label><br>
                        <label><input type="radio" name="q7" value="Du texte brut sans formatage"> Du texte brut sans formatage</label><br>
                        <label><input type="radio" name="q7" value="Un fichier XML structur√©"> Un fichier XML structur√©</label><br>
                        <label><input type="radio" name="q7" value="Une image avec le texte de la citation"> Une image avec le texte de la citation</label>
                    </div>
                    <textarea id="q7_justification" placeholder="Justification de votre r√©ponse..."></textarea>
                </div>

                <div class="form-group">
                    <label>Q8. Quelle est la diff√©rence principale entre .then() et async/await ? (3 pts)</label>
                    <div>
                        <label><input type="radio" name="q8" value="async/await offre une syntaxe plus lisible pour le code asynchrone"> async/await offre une syntaxe plus lisible pour le code asynchrone</label><br>
                        <label><input type="radio" name="q8" value=".then() est plus performant"> .then() est plus performant</label><br>
                        <label><input type="radio" name="q8" value="async/await ne g√®re pas les erreurs"> async/await ne g√®re pas les erreurs</label><br>
                        <label><input type="radio" name="q8" value="Il n'y a aucune diff√©rence fonctionnelle"> Il n'y a aucune diff√©rence fonctionnelle</label>
                    </div>
                    <textarea id="q8_justification" placeholder="Justification de votre r√©ponse..."></textarea>
                </div>

                <div class="form-group">
                    <label>Q9. Pourquoi utilise-t-on textContent plut√¥t que innerHTML pour afficher du texte utilisateur ? (3 pts)</label>
                    <div>
                        <label><input type="radio" name="q9" value="Pour √©viter les injections XSS et les failles de s√©curit√©"> Pour √©viter les injections XSS et les failles de s√©curit√©</label><br>
                        <label><input type="radio" name="q9" value="textContent est plus rapide"> textContent est plus rapide</label><br>
                        <label><input type="radio" name="q9" value="innerHTML ne fonctionne pas avec du texte"> innerHTML ne fonctionne pas avec du texte</label><br>
                        <label><input type="radio" name="q9" value="C'est une pr√©f√©rence de style de code"> C'est une pr√©f√©rence de style de code</label>
                    </div>
                    <textarea id="q9_justification" placeholder="Justification de votre r√©ponse..."></textarea>
                </div>

                <!-- √âvaluation Technique -->
                <h2>‚ö° Auto-√©valuation Technique</h2>
                
                <h3>Fonctionnalit√©s Obligatoires (15 points)</h3>
                <div class="form-group">
                    <label><input type="checkbox" id="appel_api_fonctionnel"> Appel API fonctionnel (3 pts)</label><br>
                    <label><input type="checkbox" id="affichage_citation"> Affichage citation et auteur (2 pts)</label><br>
                    <label><input type="checkbox" id="gestion_erreurs"> Gestion des erreurs (3 pts)</label><br>
                    <label><input type="checkbox" id="design_responsive"> Design responsive (2 pts)</label><br>
                    <label><input type="checkbox" id="interactivite_bouton"> Bouton "Nouvelle citation" (2 pts)</label><br>
                    <label><input type="checkbox" id="github_pages_deploye"> GitHub Pages d√©ploy√© (3 pts)</label>
                </div>

                <h3>Fonctionnalit√©s Bonus (9 points)</h3>
                <div class="form-group">
                    <label><input type="checkbox" id="partage_social"> Partage social (2 pts)</label><br>
                    <label><input type="checkbox" id="favoris_localstorage"> Favoris localStorage (3 pts)</label><br>
                    <label><input type="checkbox" id="animations_css"> Animations CSS (1 pt)</label><br>
                    <label><input type="checkbox" id="raccourcis_clavier"> Raccourcis clavier (1 pt)</label><br>
                    <label><input type="checkbox" id="accessibilite"> Accessibilit√© (2 pts)</label>
                </div>

                <!-- Score Summary -->
                <div class="score-summary">
                    <div class="score-value" id="totalScore">0 / 42</div>
                    <div>Points Total</div>
                </div>

                <!-- Actions -->
                <div class="actions">
                    <button type="button" onclick="generateJSON()" class="btn btn-primary">
                        üîÑ G√©n√©rer JSON
                    </button>
                    <button type="button" onclick="copyToClipboard()" class="btn btn-success">
                        üìã Copier JSON
                    </button>
                </div>
            </form>

            <!-- JSON Output -->
            <div id="jsonSection" style="display: none;">
                <div class="alert alert-success">
                    <strong>‚úÖ JSON G√©n√©r√© !</strong> Copiez le contenu ci-dessous dans votre fichier <code>evaluation.json</code>
                </div>
                <div class="json-output" id="jsonOutput"></div>
            </div>
        </div>
    </div>

    <script>
        // Auto-remplir la date
        document.getElementById('date').value = new Date().toISOString().split('T')[0];

        // R√©cup√©ration du profil GitHub
        async function fetchGitHubProfile() {
            const username = document.getElementById('github_username').value.trim();
            const statusDiv = document.getElementById('github-status');
            
            if (!username) {
                showStatus('‚ö†Ô∏è Veuillez entrer un nom d\'utilisateur GitHub', 'warning');
                return;
            }

            showStatus('üîÑ R√©cup√©ration du profil...', 'loading');

            try {
                const response = await fetch(`https://api.github.com/users/${username}`);
                
                if (!response.ok) {
                    throw new Error(`Utilisateur "${username}" introuvable`);
                }

                const userData = await response.json();
                
                // Auto-remplir les informations
                if (userData.name) {
                    const nameParts = userData.name.trim().split(' ');
                    if (nameParts.length >= 2) {
                        document.getElementById('prenom').value = nameParts[0];
                        document.getElementById('nom').value = nameParts.slice(1).join(' ');
                    } else {
                        document.getElementById('prenom').value = userData.name;
                    }
                } else {
                    document.getElementById('prenom').value = userData.login;
                }
                
                // G√©n√©rer les URLs
                const repoName = `mission-1-api-citations-${username}`;
                document.getElementById('github_repository').value = `https://github.com/${username}/${repoName}`;
                document.getElementById('github_pages_url').value = `https://${username}.github.io/${repoName}/`;
                
                showStatus(`‚úÖ Profil r√©cup√©r√© ! Bienvenue ${userData.name || username}`, 'success');
                
            } catch (error) {
                showStatus(`‚ùå ${error.message}`, 'error');
            }
        }

        function showStatus(message, type) {
            const statusDiv = document.getElementById('github-status');
            let bgColor = '#dbeafe', textColor = '#1e40af';
            
            if (type === 'success') {
                bgColor = '#d1fae5';
                textColor = '#047857';
            } else if (type === 'error') {
                bgColor = '#fee2e2';
                textColor = '#dc2626';
            } else if (type === 'warning') {
                bgColor = '#fef3c7';
                textColor = '#d97706';
            }
            
            statusDiv.style.background = bgColor;
            statusDiv.style.color = textColor;
            statusDiv.style.padding = '0.75rem';
            statusDiv.style.borderRadius = '8px';
            statusDiv.style.marginBottom = '1rem';
            statusDiv.style.fontWeight = '500';
            statusDiv.textContent = message;
            statusDiv.style.display = 'block';

            if (type !== 'error') {
                setTimeout(() => statusDiv.style.display = 'none', 5000);
            }
        }

        function getSelectedValue(name) {
            const radio = document.querySelector(`input[name="${name}"]:checked`);
            return radio ? radio.value : '';
        }

        function getValue(id) {
            const element = document.getElementById(id);
            if (!element) return '';
            return element.type === 'checkbox' ? element.checked : element.value;
        }

        function updateScore() {
            let totalScore = 0;
            
            // QCM Scores
            if (getSelectedValue('q1') === 'fetch()') totalScore += 1;
            if (getSelectedValue('q2') === 'Application Programming Interface') totalScore += 1;
            if (getSelectedValue('q3') === "document.getElementById('monId')") totalScore += 1;
            if (getSelectedValue('q4') === 'try...catch avec async/await') totalScore += 2;
            if (getSelectedValue('q5') === '<blockquote>') totalScore += 2;
            if (getSelectedValue('q6') === 'Envoie les commits locaux vers le repository distant') totalScore += 2;
            if (getSelectedValue('q7') === 'Un objet JSON avec les propri√©t√©s content, author et length') totalScore += 3;
            if (getSelectedValue('q8') === 'async/await offre une syntaxe plus lisible pour le code asynchrone') totalScore += 3;
            if (getSelectedValue('q9') === 'Pour √©viter les injections XSS et les failles de s√©curit√©') totalScore += 3;
            
            // Technical Scores
            if (getValue('appel_api_fonctionnel')) totalScore += 3;
            if (getValue('affichage_citation')) totalScore += 2;
            if (getValue('gestion_erreurs')) totalScore += 3;
            if (getValue('design_responsive')) totalScore += 2;
            if (getValue('interactivite_bouton')) totalScore += 2;
            if (getValue('github_pages_deploye')) totalScore += 3;
            if (getValue('partage_social')) totalScore += 2;
            if (getValue('favoris_localstorage')) totalScore += 3;
            if (getValue('animations_css')) totalScore += 1;
            if (getValue('raccourcis_clavier')) totalScore += 1;
            if (getValue('accessibilite')) totalScore += 2;
            
            document.getElementById('totalScore').textContent = `${totalScore} / 42`;
        }

        function generateJSON() {
            const evaluation = {
                "etudiant": {
                    "nom": getValue('nom'),
                    "prenom": getValue('prenom'),
                    "classe": "BTS2-SIO-SLAM",
                    "date": getValue('date'),
                    "duree_seance": getValue('duree_seance'),
                    "github_repository": getValue('github_repository'),
                    "github_pages_url": getValue('github_pages_url')
                },
                "qcm_niveau_debutant": {
                    "q1": {
                        "question": "Quelle m√©thode JavaScript permet de faire un appel API asynchrone moderne ?",
                        "reponse": getSelectedValue('q1'),
                        "options": ["fetch()", "call()", "request()", "api()"],
                        "justification": getValue('q7_justification'),
                        "points": 3,
                        "concept": "Structure API REST"
                    },
                    "q8": {
                        "question": "Quelle est la diff√©rence principale entre .then() et async/await ?",
                        "reponse": getSelectedValue('q8'),
                        "options": ["async/await offre une syntaxe plus lisible pour le code asynchrone", ".then() est plus performant", "async/await ne g√®re pas les erreurs", "Il n'y a aucune diff√©rence fonctionnelle"],
                        "justification": getValue('q8_justification'),
                        "points": 3,
                        "concept": "JavaScript avanc√©"
                    },
                    "q9": {
                        "question": "Pourquoi utilise-t-on textContent plut√¥t que innerHTML pour afficher du texte utilisateur ?",
                        "reponse": getSelectedValue('q9'),
                        "options": ["Pour √©viter les injections XSS et les failles de s√©curit√©", "textContent est plus rapide", "innerHTML ne fonctionne pas avec du texte", "C'est une pr√©f√©rence de style de code"],
                        "justification": getValue('q9_justification'),
                        "points": 3,
                        "concept": "S√©curit√© web"
                    }
                },
                "evaluation_technique": {
                    "fonctionnalites_implementees": {
                        "appel_api_fonctionnel": {
                            "realise": getValue('appel_api_fonctionnel'),
                            "points": 3,
                            "commentaire": ""
                        },
                        "affichage_citation": {
                            "realise": getValue('affichage_citation'),
                            "points": 2,
                            "commentaire": ""
                        },
                        "gestion_erreurs": {
                            "realise": getValue('gestion_erreurs'),
                            "points": 3,
                            "commentaire": ""
                        },
                        "design_responsive": {
                            "realise": getValue('design_responsive'),
                            "points": 2,
                            "commentaire": ""
                        },
                        "interactivite_bouton": {
                            "realise": getValue('interactivite_bouton'),
                            "points": 2,
                            "commentaire": ""
                        },
                        "github_pages_deploye": {
                            "realise": getValue('github_pages_deploye'),
                            "points": 3,
                            "commentaire": ""
                        }
                    },
                    "bonus_optionnels": {
                        "partage_social": {
                            "realise": getValue('partage_social'),
                            "points": 2,
                            "commentaire": ""
                        },
                        "favoris_localstorage": {
                            "realise": getValue('favoris_localstorage'),
                            "points": 3,
                            "commentaire": ""
                        },
                        "animations_css": {
                            "realise": getValue('animations_css'),
                            "points": 1,
                            "commentaire": ""
                        },
                        "raccourcis_clavier": {
                            "realise": getValue('raccourcis_clavier'),
                            "points": 1,
                            "commentaire": ""
                        },
                        "accessibilite": {
                            "realise": getValue('accessibilite'),
                            "points": 2,
                            "commentaire": ""
                        }
                    }
                },
                "auto√©valuation_progression": {
                    "etapes_completees": {
                        "etape_1_appel_api": {
                            "terminee": false,
                            "difficulte_per√ßue": "",
                            "temps_passe": "",
                            "aide_necessaire": ""
                        },
                        "etape_2_affichage_dom": {
                            "terminee": false,
                            "difficulte_per√ßue": "",
                            "temps_passe": "",
                            "aide_necessaire": ""
                        },
                        "etape_3_gestion_erreurs": {
                            "terminee": false,
                            "difficulte_per√ßue": "",
                            "temps_passe": "",
                            "aide_necessaire": ""
                        },
                        "etape_4_evenements": {
                            "terminee": false,
                            "difficulte_per√ßue": "",
                            "temps_passe": "",
                            "aide_necessaire": ""
                        },
                        "bonus_fonctionnalites": {
                            "terminee": false,
                            "difficulte_per√ßue": "",
                            "temps_passe": "",
                            "aide_necessaire": ""
                        }
                    },
                    "concepts_maitrises": {
                        "fetch_api": "",
                        "async_await": "",
                        "manipulation_dom": "",
                        "gestion_erreurs": "",
                        "event_listeners": "",
                        "git_github": "",
                        "html_semantique": "",
                        "css_responsive": ""
                    },
                    "concepts_a_revoir": [],
                    "difficultes_rencontrees": [],
                    "points_forts_identifies": [],
                    "ameliorations_souhaitees": []
                },
                "reflexion_pedagogique": {
                    "temps_total_necessaire": "",
                    "etape_la_plus_difficile": "",
                    "etape_la_plus_interessante": "",
                    "utilite_des_commentaires": "",
                    "clarte_des_instructions": "",
                    "suggestions_amelioration": "",
                    "niveau_satisfaction": "",
                    "recommanderiez_exercice": ""
                },
                "evaluation_formateur": {
                    "qualite_code": {
                        "organisation": "",
                        "commentaires": "",
                        "bonnes_pratiques": "",
                        "note": ""
                    },
                    "comprehension_concepts": {
                        "api_rest": "",
                        "javascript_asynchrone": "",
                        "manipulation_dom": "",
                        "note": ""
                    },
                    "autonomie": {
                        "recherche_solutions": "",
                        "gestion_erreurs": "",
                        "debugging": "",
                        "note": ""
                    },
                    "commentaires_generaux": "",
                    "points_a_ameliorer": [],
                    "felicitations": []
                },
                "grille_notation": {
                    "qcm_debutant": {
                        "total_points": 3,
                        "points_obtenus": calculateQCMScore('debutant')
                    },
                    "qcm_intermediaire": {
                        "total_points": 6,
                        "points_obtenus": calculateQCMScore('intermediaire')
                    },
                    "qcm_avance": {
                        "total_points": 9,
                        "points_obtenus": calculateQCMScore('avance')
                    },
                    "technique_obligatoire": {
                        "total_points": 15,
                        "points_obtenus": calculateTechniqueScore('obligatoire')
                    },
                    "bonus_optionnel": {
                        "total_points": 9,
                        "points_obtenus": calculateTechniqueScore('bonus')
                    },
                    "note_finale": {
                        "total_sur_20": calculateFinalScore(),
                        "appreciation": getFinalAppreciation()
                    }
                },
                "meta_evaluation": {
                    "date_evaluation": new Date().toISOString().split('T')[0],
                    "evaluateur": "Auto-√©valuation √©tudiant",
                    "duree_evaluation": "",
                    "outils_utilises": ["Formulaire web interactif"],
                    "observations": "Formulaire g√©n√©r√© automatiquement"
                }
            };

            document.getElementById('jsonOutput').textContent = JSON.stringify(evaluation, null, 2);
            document.getElementById('jsonSection').style.display = 'block';
            updateScore();
        }

        function calculateQCMScore(niveau) {
            if (niveau === 'debutant') {
                let score = 0;
                if (getSelectedValue('q1') === 'fetch()') score += 1;
                if (getSelectedValue('q2') === 'Application Programming Interface') score += 1;
                if (getSelectedValue('q3') === "document.getElementById('monId')") score += 1;
                return score;
            } else if (niveau === 'intermediaire') {
                let score = 0;
                if (getSelectedValue('q4') === 'try...catch avec async/await') score += 2;
                if (getSelectedValue('q5') === '<blockquote>') score += 2;
                if (getSelectedValue('q6') === 'Envoie les commits locaux vers le repository distant') score += 2;
                return score;
            } else if (niveau === 'avance') {
                let score = 0;
                if (getSelectedValue('q7') === 'Un objet JSON avec les propri√©t√©s content, author et length') score += 3;
                if (getSelectedValue('q8') === 'async/await offre une syntaxe plus lisible pour le code asynchrone') score += 3;
                if (getSelectedValue('q9') === 'Pour √©viter les injections XSS et les failles de s√©curit√©') score += 3;
                return score;
            }
            return 0;
        }

        function calculateTechniqueScore(type) {
            if (type === 'obligatoire') {
                let score = 0;
                if (getValue('appel_api_fonctionnel')) score += 3;
                if (getValue('affichage_citation')) score += 2;
                if (getValue('gestion_erreurs')) score += 3;
                if (getValue('design_responsive')) score += 2;
                if (getValue('interactivite_bouton')) score += 2;
                if (getValue('github_pages_deploye')) score += 3;
                return score;
            } else if (type === 'bonus') {
                let score = 0;
                if (getValue('partage_social')) score += 2;
                if (getValue('favoris_localstorage')) score += 3;
                if (getValue('animations_css')) score += 1;
                if (getValue('raccourcis_clavier')) score += 1;
                if (getValue('accessibilite')) score += 2;
                return score;
            }
            return 0;
        }

        function calculateFinalScore() {
            const qcmTotal = calculateQCMScore('debutant') + calculateQCMScore('intermediaire') + calculateQCMScore('avance');
            const techniqueTotal = calculateTechniqueScore('obligatoire') + calculateTechniqueScore('bonus');
            return Math.min(20, Math.round((qcmTotal + techniqueTotal) * 20 / 42));
        }

        function getFinalAppreciation() {
            const score = calculateFinalScore();
            if (score >= 18) return "Excellent";
            if (score >= 16) return "Tr√®s bien";
            if (score >= 14) return "Bien";
            if (score >= 12) return "Assez bien";
            if (score >= 10) return "Passable";
            return "Insuffisant";
        }

        function copyToClipboard() {
            const jsonText = document.getElementById('jsonOutput').textContent;
            if (!jsonText) {
                alert('G√©n√©rez d\'abord le JSON !');
                return;
            }

            if (navigator.clipboard) {
                navigator.clipboard.writeText(jsonText).then(() => {
                    alert('‚úÖ JSON copi√© dans le presse-papiers !');
                }).catch(err => {
                    console.error('Erreur de copie:', err);
                    alert('Erreur lors de la copie. S√©lectionnez manuellement le texte.');
                });
            } else {
                alert('Fonction copie non support√©e. S√©lectionnez le texte manuellement.');
            }
        }

        // Mise √† jour automatique du score
        document.addEventListener('change', updateScore);
        document.addEventListener('input', updateScore);

        // Auto-g√©n√©ration si username GitHub saisi
        document.getElementById('github_username').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                fetchGitHubProfile();
            }
        });
    </script>
</body>
</html>ification": getValue('q1_justification'),
                        "points": 1,
                        "concept": "API asynchrone"
                    },
                    "q2": {
                        "question": "Que signifie l'acronyme API ?",
                        "reponse": getSelectedValue('q2'),
                        "options": ["Application Programming Interface", "Automated Program Interface", "Advanced Programming Interface", "Application Process Interface"],
                        "justification": getValue('q2_justification'),
                        "points": 1,
                        "concept": "Concepts de base"
                    },
                    "q3": {
                        "question": "Comment r√©cup√®re-t-on un √©l√©ment HTML par son ID en JavaScript ?",
                        "reponse": getSelectedValue('q3'),
                        "options": ["document.getElementById('monId')", "document.getElement('monId')", "getElementById('monId')", "document.find('#monId')"],
                        "justification": getValue('q3_justification'),
                        "points": 1,
                        "concept": "Manipulation DOM"
                    }
                },
                "qcm_niveau_intermediaire": {
                    "q4": {
                        "question": "Comment g√®re-t-on une erreur avec la m√©thode fetch() ?",
                        "reponse": getSelectedValue('q4'),
                        "options": ["try...catch avec async/await", "error() callback", "fail() method", "exception handler"],
                        "justification": getValue('q4_justification'),
                        "points": 2,
                        "concept": "Gestion d'erreurs"
                    },
                    "q5": {
                        "question": "Quelle balise HTML est s√©mantiquement correcte pour afficher une citation ?",
                        "reponse": getSelectedValue('q5'),
                        "options": ["<blockquote>", "<cite>", "<quote>", "<div class='citation'>"],
                        "justification": getValue('q5_justification'),
                        "points": 2,
                        "concept": "HTML s√©mantique"
                    },
                    "q6": {
                        "question": "Que fait la commande 'git push origin main' ?",
                        "reponse": getSelectedValue('q6'),
                        "options": ["Envoie les commits locaux vers le repository distant", "R√©cup√®re les modifications du serveur", "Cr√©e une nouvelle branche main", "Supprime les fichiers du repository"],
                        "justification": getValue('q6_justification'),
                        "points": 2,
                        "concept": "Git workflow"
                    }
                },
                "qcm_niveau_avance": {
                    "q7": {
                        "question": "Que retourne l'API quotable.io dans sa r√©ponse ?",
                        "reponse": getSelectedValue('q7'),
                        "options": ["Un objet JSON avec les propri√©t√©s content, author et length", "Du texte brut sans formatage", "Un fichier XML structur√©", "Une image avec le texte de la citation"],
                        "just